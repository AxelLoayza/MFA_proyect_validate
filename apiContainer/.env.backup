# ============================================================================
# Biometric Normalization Service - Environment Configuration
# ============================================================================
# Copy this file to .env and adjust values for your environment

# ============================================================================
# API SERVER CONFIGURATION
# ============================================================================
API_HOST=0.0.0.0
API_PORT=9001
ENVIRONMENT=development
DEBUG=true

# ============================================================================
# JWT TOKEN VALIDATION (from identity provider)
# ============================================================================
# Path to JWT public key (PEM format) - used to validate tokens
JWT_PUBLIC_KEY_PATH=./keys/jwt_public.pem

# JWT Claims that must match incoming tokens
JWT_ISSUER=LocalAzure
JWT_AUDIENCE=bmfa-processor

# ============================================================================
# BIOMETRIC SIGNATURE VALIDATION
# ============================================================================
# Credentials to validate that signature data comes from authorized provider
SIGNATURE_PROVIDER_USERNAME=bmfa_validator
SIGNATURE_PROVIDER_PASSWORD=secure_password_change_me

# ============================================================================
# CLOUD ML SERVICE CONFIGURATION (TLS/HTTPS)
# ============================================================================
# HTTPS endpoint where normalized biometric data will be sent
# This service will receive normalized stroke data + features
CLOUD_PROVIDER_ENDPOINT=https://your-ml-service.example.com/api/biometric/validate

# Authentication for cloud ML service (Basic Auth)
CLOUD_PROVIDER_USERNAME=bmfa_user
CLOUD_PROVIDER_PASSWORD=your_secure_password_here

# Communication timeout in seconds
CLOUD_PROVIDER_TIMEOUT=30

# Verify SSL/TLS certificate (set to false only for development with self-signed certs)
CLOUD_PROVIDER_VERIFY_SSL=true

# ============================================================================
# BIOMETRIC DATA NORMALIZATION
# ============================================================================
# Minimum stroke points required (will apply padding if stroke has fewer)
# If stroke has less points, linear interpolation will add more
MIN_STROKE_POINTS=100

# Maximum stroke points allowed (reject if exceeds)
MAX_STROKE_POINTS=1200

# Padding strategy for short strokes:
# - "linear_interpolation": Smooth interpolation between points (recommended)
# - "repeat_last": Simple repetition of last point
PADDING_STRATEGY=linear_interpolation

# ============================================================================
# RATE LIMITING & SECURITY
# ============================================================================
# Maximum requests per user per minute
RATE_LIMIT_REQUESTS=8

# Maximum request body size in bytes (protects against payload attacks)
# ~100 KB allows up to 1200 points with safety margin
MAX_REQUEST_SIZE=102400

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO
